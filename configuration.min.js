function initializeConfiguration(){setupCart(),setupMegamenu(),setupMobileMenu(),setupExtraMessages(),setupSEOs(),setupItemCountModifiers(),setupSiteCartActionListeners(),setupViewSelectHandlers(),setupProductInfoPager(),setupProductMainImage(),changePhotoOnHover(),setupMenuExpander(),setIconsOnChildfulMenuItems(),handleSearchOnMobile(),handleLogoutOnClick(),handleMobileMenu(),handleBackgroundOnMobileMenuClick(),handleProductContainerPosition(),handleMobileFilterButton(),initProductHover(),appendProductCountOnFooterMenu(),renderProducts(),handleMobileItemsBackgroundClick(),setupPaymentIcons(),setupShippingIcons(),observeProductChanges(),handleAddOpinionOnTabs(),handleHideMenuOnBackgroundMousenter(),handleVerticalMenu(),onProductNameClicked()}function setupCart(){let e=templateConfiguration.cartType;switch(console.info(`Selected cart type: ${e}`),e){case"site-cart":$(".basket-contain").remove(),$(".delivery-cost").text(getCheapestShippingCost());break;case"short-cart":$(".basket-site-cart").hide(),$(".delivery-cost").text(getCheapestShippingCost());break;default:console.warn(`Invalid basket variant: "${e}". The variant was not applied.`)}}function getCheapestShippingCost(){let e=frontAPI.getBasketInfo({lang:templateConfiguration.lang,currency:templateConfiguration.currency}),t=e.shippings.filter(e=>e.cost_float>0);if(0==t.length)return templateConfiguration.translation.freeDelivery;let n=t.reduce((e,t)=>t.cost_float<e.cost_float?t:e,t[0]);return n.cost}function setupMegamenu(){let e=templateConfiguration.megamenuType;console.info(`Selected mega menu type: ${e}`);let t=["cascade","version-1","version-1-plus","version-2","version-2-plus","version-3"];switch($(".menu").removeClass(t.join(" ")),t.includes(e)?$(".menu").addClass(e):console.warn(`Invalid megamenu variant: "${e}". The variant was not applied.`),e){case"version-2":case"version-2-plus":injectMegamenuActionButton();case"version-1-plus":case"version-2-plus":addProductOfTheDaysToMegamenu()}}function injectMegamenuActionButton(){let e=templateConfiguration.numberOfVisibleCategoryItems;console.info(`Action button injected on menu on position: ${e}`),$(".submenu.level1 ul.level1 > li.parent").each(function(){let t=$(this).find(".submenu.level2 ul.level2 > li"),n=t.length-e;if(n<=0)return;t.slice(e).hide();let o=createButton("expand-menu-button",templateConfiguration.translation.expandCategory,()=>{o.hide(),l.show(),t.show()}),l=createButton("collapse-menu-button",templateConfiguration.translation.collapseCategory,()=>{l.hide(),o.show(),t.slice(e).hide()});$(this).append(o).append(l)})}function addProductOfTheDaysToMegamenu(){}function populateProductBoxFromAPI(e){let t=$(".product-placeholder").prop("outerHTML");frontAPI.getPotdProducts(n=>{let{list:o}=n;$.each(o,(n,o)=>{let{id:l,main_image:i,category:{name:s},producer:{name:a},url:r,name:c,price:{gross:{base:u},net:{base:d}}}=o,p=replacePlaceholders(t,{STOCK_ID:l,MAIN_IMAGE:i,CATEGORY_NAME:s,PRODUCER_NAME:a,URL:r,NAME:c,PRICE_GROSS_BASE:u,PRICE_NET_BASE:d});e.append(p)})},{lang:templateConfiguration.lang,currency:templateConfiguration.currency})}function replacePlaceholders(e,t){for(let n in t)if(t.hasOwnProperty(n)){let o=RegExp(`POTD_${n}`,"g");e=e.replace(o,t[n])}return e}function setupMobileMenu(){let e=templateConfiguration.mobileMenuType;switch(console.info(`Selected mobile menu type: ${e}`),e){case"horizontal":appendSwipeableMobileMenu(),$(".fa-align-justify").off(),$(".fa-align-justify").on("click",function(e){e.preventDefault(),$(".swipeable-mobile-menu").toggle(),"none"===$(".swipeable-mobile-menu").css("display")?$(".mobile-items-background").hide():$(".mobile-items-background").show()});break;case"vertical":break;default:console.warn(`Invalid mobile menu type variant: "${e}". The variant was not applied.`)}}function appendSwipeableMobileMenu(){var e=document.createElement("div");e.classList.add("swipeable-mobile-menu"),e.appendChild(createHTMLTree(frontAPI.getCategories(),0,templateConfiguration.translation.backToShop,templateConfiguration.translation.mobileMenuTitle,"")),document.body.appendChild(e);let t=0,n=$(".swipeable-mobile-menu");$(".mobile-menu-back").on("click",function(e){if(0===t){n.hide(),$(".mobile-items-background").hide();let o=document.querySelector("html");o.style.cssText="overflow-y: scroll !important;";return}t--;let l=$(this).parent(),i=$(this).parent().parent().parent();n.css("transform",`translateX(${-(100*t)}%)`),l.css("display","none"),i.css("overflow","scroll")}),$(".mobile-menu-item").on("click",function(e){let o=e.clientX-$(this).offset().left;if(o>=$(this).width()-30&&$(this).siblings().length>0){t++,e.preventDefault();let l=$(this).parent().find(">ul"),i=$(this).parent().parent();l.css("display","block"),i.css("overflow","visible"),n.css("transform",`translateX(${-(100*t)}%)`)}})}function createHTMLTree(e,t,n,o,l){var i=document.createElement("ul");i.classList.add(`mobile-level-${t}`);var s=document.createElement("a");s.classList="title-menu",s.href=l,s.textContent=o;var a=document.createElement("button");return a.classList="mobile-menu-back",a.textContent=n,i.appendChild(a),i.appendChild(s),e.forEach(e=>{var n=document.createElement("li"),l=document.createElement("a");if(l.href=`/pl/c/${e.name}/${e.id}`,l.textContent=e.name,l.classList="mobile-menu-item",n.appendChild(l),e.children.length>0){var s=createHTMLTree(e.children,t+1,o,e.name,`/pl/c/${e.name}/${e.id}`);n.appendChild(s)}i.appendChild(n)}),0==t&&"undefined"!=typeof customMobileMenuItems&&customMobileMenuItems.forEach(e=>{var t=document.createElement("li"),n=document.createElement("a");n.href=e.url,n.textContent=e.name,n.classList="mobile-menu-item",t.appendChild(n),i.appendChild(t)}),i}function setupExtraMessages(){let e=0;$(".next-message").on("click",function(){e=(e+1)%$(".extra-message").length,$(".extra-message").css("display","none").eq(e).css("display","block")}),$(".prev-message").on("click",function(){e=(e-1+$(".extra-message").length)%$(".extra-message").length,$(".extra-message").css("display","none").eq(e).css("display","block")}),setInterval(function(){e=(e+1)%$(".extra-message").length,$(".extra-message").css("display","none").eq(e).css("display","block")},templateConfiguration.extraMessageAutoChangeAfter)}function setupSEOs(){setupSEO("#box-seo"),setupSEO(".shop_product_list .categorydesc.bottom")}function setupSEO(e){let t=$(".seo-invisible"),n=$(e);if(!t.length||!n.length)return;let o=$("<button>").attr("id","expand-button").text(templateConfiguration.translation.expandSEO).click(function(){o.hide(),l.show(),t.show()}),l=$("<button>").attr("id","collapse-button").text(templateConfiguration.translation.collapseSEO).click(function(){l.hide(),o.show(),t.hide()});t.first().before(o),n.append(l)}function setupItemCountModifiers(){setupItemCountModifier(".quantity input"),setupItemCountModifier(".quantity_wrap input")}function setupItemCountModifier(e){let t=Array.from(document.querySelectorAll(e)),n=Array.from(document.querySelectorAll(".more-item")),o=Array.from(document.querySelectorAll(".less-item"));n.forEach((e,n)=>{e.addEventListener("click",()=>(function e(t){try{let n=Number(t.value);t.value=n+1;let o=new Event("change",{bubbles:!0});t.dispatchEvent(o)}catch(l){}})(t[n]))}),o.forEach((e,n)=>{e.addEventListener("click",()=>(function e(t){try{let n=Number(t.value);if(n>1){t.value=n-1;let o=new Event("change",{bubbles:!0});t.dispatchEvent(o)}}catch(l){}})(t[n]))})}function setupSiteCartActionListeners(){let e=$(".basket-site-cart").get(0),t=$(".menu-background").get(0),n=$(".menu").get(0),o=$(".basket.right").get(0);if(!e||"site-cart"!=templateConfiguration.cartType)return;let l=window.getComputedStyle(e).getPropertyValue("right");$(e).on("mouseleave click",function(){e.style.right=l,t.style.opacity=0,t.style.height=0,n.style.zIndex=24}),$(o).on("click",function(o){o.preventDefault(),e.style.right=0,t.style.opacity=1,t.style.height="100%",n.style.zIndex=0})}function setupViewSelectHandlers(){let e="select-tablet-active",t=document.querySelectorAll(".select-tablet");$(t).on("click",function(){let n=this.getAttribute("select-id");t.forEach(function(t){t.classList.remove(e)}),this.classList.add(e),$("#"+n).prop("selectedIndex",$(this).index()+1)})}function setupProductInfoPager(){let e="active-menu-item",t=document.querySelector(".product-additional-items-menu");if(!t)return;let n=t.children[0];n.classList.add(e),Array.from(t.children).forEach(t=>{t.addEventListener("click",function(){document.querySelectorAll("."+e).forEach(t=>{t.classList.remove(e)}),t.classList.add(e),Array.from(t.classList).forEach(e=>{switch(e){case"description-btn":document.querySelectorAll(".product-modules > div").forEach(e=>{e.style.cssText="display: none !important"}),document.querySelector("#box_description").style.cssText="display: block !important";break;case"shipping-btn":document.querySelectorAll(".product-modules > div").forEach(e=>{e.style.cssText="display: none !important"}),document.querySelector("#box_productdeliveries").style.cssText="display: block !important";break;case"attributes-btn":document.querySelectorAll(".product-modules > div").forEach(e=>{e.style.cssText="display: none !important"}),document.querySelector("#box_productdata").style.cssText="display: block !important";break;case"bundle-btn":document.querySelectorAll(".product-modules > div").forEach(e=>{e.style.cssText="display: none !important"}),document.querySelector("#box_bundle").style.cssText="display: block !important";break;case"comments-btn":let t=void 0!==templateConfiguration.commentsContainerId?templateConfiguration.commentsContainerId:"#box_productcomments";document.querySelectorAll(".product-modules > div").forEach(e=>{e.style.cssText="display: none !important"}),document.querySelector(t).style.cssText="display: block !important"}})})})}function setupProductMainImage(){let e=$("#box_productfull")[0];if(!e)return;let t=Array.from(e.classList);t.includes("horizontal-miniatures")?setupCarouselProductPageHandler(4,4):t.includes("carousel")?setupCarouselProductPageHandler(1,1):setupCarouselProductPageHandler(2,3)}function setupCarouselProductPageHandler(e,t){let n=$(".prev-image")[0],o=$(".next-image")[0],l=$(".smallgallery a"),i=0;if(n&&o){if(l.length<=e){n.style.display="none",o.style.display="none";return}$(n).on("click",()=>{let n=window.innerWidth<980?t:e;showLinks(l,i=Math.max(i-1,0),n)}),$(o).on("click",()=>{let n=window.innerWidth<980?t:e;i+n<=l.length-1&&i++,showLinks(l,i,n)})}}function showLinks(e,t,n){e.each(function(e,o){e>=t&&e<t+n?$(o).css("display","inline"):$(o).css("display","none")})}function changePhotoOnHover(){let e=$(".smallgallery a img");e.on("mouseenter",function(){$(".smallgallery a").removeClass("current"),$(this).parent().addClass("current");let e=$(".mainimg .photo");e.attr("src",this.src)})}function setupMenuExpander(){let e=$('[class^="level_"]>li:has(.current)>a, li:has(.current) >a, li.current:has(ul)>a');e.length&&e.on("click",function(e){let t=$(this).next();if(!t.length)return;let n=e.clientX-$(this).offset().left;if(n>=$(this).outerWidth()-24){e.preventDefault();let o="none"===t.css("display");o?($(this).removeClass("collapsed"),t.css("display","block")):($(this).addClass("collapsed"),t.css("display","none"))}})}function setIconsOnChildfulMenuItems(){let e=frontAPI.getCategoryList({lang:templateConfiguration.lang,urlParams:"?limit=50"});for(let t=1;t<=e.pages;t++){let n=frontAPI.getCategoryList({lang:templateConfiguration.lang,urlParams:"?limit=50&page="+t});$.each(n.list,function(e,t){if(t.has_children){let n=$(`#category_${t.category_id} > a`);n.length&&n.addClass("expandable")}})}}var isSearchOpened=!1;function handleSearchOnMobile(){let e=$(".open-search"),t=$(".search__container"),n=$(".contact-header-container"),o=!1;e.on("click",()=>{o?(t.css("display","none"),n.css("display","flex")):(t.css("display","block"),n.css("display","none")),o=!o})}function handleLogoutOnClick(){let e=$(".logout-button");e.on("click",()=>{frontAPI.logout(),window.location.reload()})}function handleMobileMenu(){let e=document.querySelector(".footer-menu-contact"),t=document.querySelector(".footer-menu-search"),n=document.querySelector(".footer-menu-account"),o=document.querySelector(".footer-menu-basket"),l=document.querySelector(".mobile-menu-items"),i=document.querySelector(".mobile-menu-items > button"),s=document.querySelectorAll(".mobile-menu-items >div");i.addEventListener("click",()=>{l.style.display="none";let e=document.querySelector(".search__container");e.style.display="none",$(".mobile-items-background").hide();let t=document.querySelector("html");t.style.cssText="overflow-y: scroll !important;",$(".search__container").hide()}),$(".basket-site-cart button").on("click",function(){if(window.innerWidth>1300){$(".basket-site-cart").get(0).trigger("mouseleave");return}l.style.display="none";let e=document.querySelector(".basket-site-cart");e.style.cssText="display: none !important;",$(".mobile-items-background").hide();let t=document.querySelector("html");t.style.cssText="overflow-y: scroll !important;",$(".search__container").hide()}),e.addEventListener("click",()=>onMobileItemClicked(l,s,".mobile-menu-contact",!1,!1)),t.addEventListener("click",()=>{onMobileItemClicked(l,s,".mobile-menu-search",!0,!1),$(".search__container").show()}),n.addEventListener("click",()=>onMobileItemClicked(l,s,".mobile-menu-profile",!1,!1)),o.addEventListener("click",()=>onMobileItemClicked(l,s,".mobile-menu-basket",!1,!0))}function onMobileItemClicked(e,t,n,o,l){$(".search__container").hide(),$(".mobile-items-background").show();let i=document.querySelector("html");i.style.cssText="overflow-y: hidden !important;",$(".swipeable-mobile-menu").hide(),$("#box_filter").hide(),e.style.display="block",Array.from(t).forEach(e=>{e.style.display="none"}),document.querySelector(n).style.display="flex";let s=document.querySelector(".search__container");s.style.display=o?"block":"none";let a=document.querySelector(".basket-site-cart");a.style.cssText=l?"display: block !important;":"display: none !important;"}function handleBackgroundOnMobileMenuClick(){let e=document.querySelector(".fa-align-justify"),t=document.querySelector(".mobile-menu-items"),n=document.querySelector("#box_filter"),o=document.querySelector("html");e.addEventListener("click",function(){let e="block"===window.getComputedStyle(t).display;n&&(document.querySelector("#box_filter").style.display="none"),e?(document.querySelector(".search__container").style.display="none",document.querySelector(".basket-site-cart").style.cssText="display: none !important;",t.style.display="none",o.style.overflowY="scroll"):o.style.overflowY="hidden"})}function handleProductContainerPosition(){if(0==$(".shop_product").length||1==$(".with-tabs").length)return;let e=!1,t=$(".product-container"),n=$(".product-additional-items-menu"),o=n.length>0?n:$(".product-modules"),l=t.parent();function i(){innerWidth<980&&!e?(e=!0,t.insertBefore(o)):innerWidth>=980&&e&&(e=!1,t.appendTo(l))}i(),window.onresize=function(e){i()}}function handleMobileFilterButton(){let e=$(".mobile-filter-button"),t=$(".mobile-filter-menu-back"),n=$(".mobile-items-background"),o=$(".shop_product_list");0!=o.length&&(document.body.addEventListener("scroll",()=>{let t=document.body.scrollTop;e.toggleClass("anchored",t>100)}),document.body.addEventListener("touchmove",()=>{let t=document.body.scrollTop();e.toggleClass("anchored",t>100)}),e.on("click",()=>{n.toggle(),$("#box_filter").toggle();let e=document.querySelector("html"),t=document.querySelector(".leftcol"),o=document.querySelector(".leftcol #box_filter");"block"==n.css("display")?(e.style.cssText="overflow-y: hidden !important;",o&&(t.style.cssText="display: block !important;")):(e.style.cssText="overflow-y: scroll !important;",o&&(t.style.cssText="display: none !important;"))}),t.on("click",()=>{n.toggle(),$("#box_filter").toggle();let e=document.querySelector("html"),t=document.querySelector(".leftcol"),o=document.querySelector(".leftcol #box_filter");"block"==n.css("display")?(e.style.cssText="overflow-y: hidden !important;",o&&(t.style.cssText="display: block !important;")):(e.style.cssText="overflow-y: scroll !important;",o&&(t.style.cssText="display: none !important;"))}))}function initProductHover(){templateConfiguration.hoverableProduct&&($(".product-inner-wrapper .boximgsize img").each(function(){let e=$("<div class='hoverable-product-wrapper'></div>");$(this).parent().append(e)}),$(".product-inner-wrapper .boximgsize").on("mouseenter",function(){let e=$(this).find(">div");if(0===e.children().length){let t=parseInt($(this).parent().parent().parent().attr("data-product-id"));if(!isNaN(t)){let n=frontAPI.getProduct({id:t}),o=$("<section></section>").attr("id",`hoverable-product-${t}`);n.options_configuration.forEach(e=>{let t=e.values;if(t.length>0){let n=$("<div class='hoverable-product-attr-"+e.id+"'></div>").addClass("option"),l=$("<h3></h3>").text(e.name+":");n.append(l),t.forEach(e=>{let t=$("<p class='hoverable-value-"+e.id+"'></p>").text(e.name);t.on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).siblings().removeClass("selected"),$(this).toggleClass("selected")}),n.append(t)}),o.append(n)}}),e.append(o)}}e.show()}),$(".product-inner-wrapper .boximgsize").on("mouseleave",function(){$(this).find(">div").hide()}))}function appendProductCountOnFooterMenu(){let e=templateConfiguration.maxCountVisible,t=frontAPI.getBasketInfo({}),n=t.products.reduce((e,t)=>e+t.quantity,0),o=n>e?e+"+":n.toString();n>0&&($(".counts-product-footer").text(o),$(".counts-product-footer").show())}function createProductElement(e){let t=document.createElement("div");return t.className="product product-item row center",t.innerHTML=`
    <div class="product-inner-wrapper">
            <a href="${e.url}" title="${e.name}" class="row">
                <span class="boximgsize row">
                    <img src="/environment/cache/images/300_300_productGfx_${e.main_image}/Mask-Group-25.png" data-src="/environment/cache/images/300_300_productGfx_${e.main_image}/Mask-Group-25.png">
                    <noscript>
                        <img src="/environment/cache/images/300_300_productGfx_${e.main_image}/Mask-Group-25.png" alt="${e.name}">
                    </noscript>
                </span>
                <div class="manufacturer row">
                    <span>${e.producer.name}</span>
                </div>
                <div class="productnamewrap row">
                    <span class="productname">${e.name}</span>
                </div>
            </a>
            <div class="price price_extended row">
                <section>
                    <p>
                        <em>${e.price.gross.base}</em>
                    </p>
                </section>
                <span class="hide price-netto">
                    <p>
                        <em>${e.price.net.base}</em>
                    </p>
                </span>
            </div>
            <a href="${window.location.href}pl/fav/add/${e.stockId}">
            <img class="add-to-fav" src="${templateConfiguration.templatePath}/images/user/add-to-fav.svg">
            </a>
            <form class="basket basket-box " action="/pl/basket/add/post" method="post">
                <fieldset>
                    <div class="shaded_inputwrap"><input name="quantity" value="1" type="text" class="short center"></div>
                    <span class="unit">szt.</span>
                    <input type="hidden" value="${e.stockId}" name="stock_id">
                    <button class="addtobasket btn btn-red" type="submit">
                    <img src="/libraries/images/1px.gif" alt="" class="px1">
                    </button>
                </fieldset>
            </form>
        </div>
    </div>
`,t}function renderProducts(){let e=document.querySelectorAll(".productoftheday_menu .slider-content"),t=frontAPI.getPotdProducts().list;e.forEach(e=>{t.forEach(t=>{let n=createProductElement(t);e.append(n)})})}function handleMobileItemsBackgroundClick(){$(".mobile-items-background").on("click",function(){$(".swipeable-mobile-menu").hide(),$(".mobile-menu-items").hide(),$("#box_filter").hide(),$(this).hide();let e=document.querySelector(".search__container");e.style.display="none";let t=document.querySelector(".basket-site-cart");t.style.cssText="display: none !important;",$(".search__container").hide()})}function setupPaymentIcons(){$(".shop_basket")&&templateConfiguration.paymentsConfiguration.forEach(e=>{let t=$(`#${e.name}`).parent().next();t.css("background-image",`url(${e.url})`),t.css("padding-left","48px")})}function setupShippingIcons(){$(".shop_basket")&&templateConfiguration.shippingsConfiguration.forEach(e=>{let t=$(`#${e.name}`).parent().next();t.css("background-image",`url(${e.url})`),t.css("padding-left","48px")})}function observeProductChanges(){let e=document.querySelectorAll(".right.basket");e.forEach(e=>{let t=new MutationObserver(observeProduct);t.observe(e,{attributes:!0,childList:!0,subtree:!0})})}function observeProduct(e,t){e.forEach(e=>{$(".ajax-product-block .btn.left").click(()=>window.location.reload())})}function handleAddOpinionOnTabs(){$(".comment a").click(function(e){$(".with-tabs")&&(e.preventDefault(),$(".comments-btn").trigger("click"),$("body").animate({scrollTop:$(".comments-btn").position().top}))})}function handleHideMenuOnBackgroundMousenter(){$(".menu-background").on("mouseenter",function(){let e=$(this);e.addClass("menu-background-hidden"),setTimeout(()=>{e.removeClass("menu-background-hidden")},400)})}function handleVerticalMenu(){handleBehaviourVerticalMenu(),$(window).on("resize",handleBehaviourVerticalMenu)}function handleBehaviourVerticalMenu(){window.innerWidth<=1030?($(".group-filter > h5").next().hide(),$(".group-filter > h5").on("click",function(){$(this).next().toggle(),$(this).hasClass("expanded")?$(this).removeClass("expanded"):$(this).addClass("expanded")})):($(".group-filter > h5").off("click"),$(".group-filter > h5").next().show())}function onProductNameClicked(){$(".product-inner-wrapper .productnamewrap").click(function(){window.location=$(this).parent().find(">a:first-of-type").attr("href")})}const createButton=(e,t,n)=>$("<button>",{class:e,text:t,click:n});
